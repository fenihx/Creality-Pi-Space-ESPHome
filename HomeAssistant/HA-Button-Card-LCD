# ---------------------------------------------
# üìå PREAMBLE / IMPORTANT NOTES
# This dashboard card is designed for controlling and monitoring the
# Creality Space Pi Plus V2 filament dryer via Home Assistant.
#
# ‚ö†Ô∏è IMPORTANT: Replace all entity_ids below with YOUR actual entities.
# They may have different names in your HA setup.
#
# ENTITY LIST:
# 1. sensor.creality_pi_space_plus_v2_dryer_status
#    ‚Üí Main dryer status (On, Off, unavailable, etc.)
#
# 2. sensor.creality_pi_space_plus_v2_cursor_state
#    ‚Üí Shows current display cursor position in dryer‚Äôs UI ("PV", "SV", "Material", "Time").
#
# 3. sensor.creality_pi_space_plus_v2_current_temperature
#    ‚Üí Current measured drying temperature
#
# 4. sensor.creality_pi_space_plus_v2_set_temperature
#    ‚Üí Target drying temperature (user-set point)
#
# 5. sensor.creality_pi_space_plus_v2_humidity
#    ‚Üí Current measured humidity inside dryer
#
# 6. sensor.creality_pi_space_plus_v2_error_status
#    ‚Üí Dryer error codes (for example, "E4 ‚Äì heating error")
#
# 7. sensor.creality_pi_space_plus_v2_material
#    ‚Üí Currently selected material preset (e.g., PLA, ABS, PETG)
#
# 8. sensor.creality_pi_space_plus_v2_drying_time
#    ‚Üí Remaining drying time
#
# 9. binary_sensor.creality_pi_space_plus_v2_script_running
#    ‚Üí Indicates if a drying script/automation is running
#
# 10. switch.creality_pi_space_plus_v2_enable_auto_dry
#     ‚Üí Auto Dry mode (On/Off)
#
# 11. switch.creality_pi_space_plus_v2_auto_power_on
#     ‚Üí Auto Power On mode (On/Off)
#
# 12. button.creality_pi_space_plus_v2_press_set
#     ‚Üí Emulates "SET" button press on the dryer
#
# 13. button.creality_pi_space_plus_v2_press_up
#     ‚Üí Emulates "UP" button press
#
# 14. button.creality_pi_space_plus_v2_press_down
#     ‚Üí Emulates "DOWN" button press
#
# 15. button.creality_pi_space_plus_v2_press_power
#     ‚Üí Emulates physical "POWER" button
#
# Replace these entities with your equivalents to adapt the card for your system.
# ---------------------------------------------


type: vertical-stack
cards:
  - type: custom:mod-card  
    card:
      type: grid
      columns: 1  
      square: false
      cards:
        - type: horizontal-stack
          cards:
            - type: custom:button-card
              entity: sensor.creality_pi_space_plus_v2_cursor_state  
              show_icon: false
              show_name: false
              show_label: true
              label: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  if (status === 'Off' || status === 'unknown' || status === 'unavailable') return '';
                  return (entity.state === 'PV') ? '‚ñ∂' : ' ';
                ]]]
              styles:
                card:
                  - background: none  
                  - box-shadow: none  
                  - border: none     
                  - padding: 0
                  - width: 20px       
                  - height: 20px
                  - justify-content: flex-end
                  - align-items: flex-start
                  - font-family: monospace  
                  - font-size: 16px
                  - color: "#7fff00"  
                label:
                  - justify-self: end
                  - text-align: right
                  - padding: 0
            
            - type: custom:button-card
              name: "PV:"
              show_icon: false
              show_name: true
              show_label: false
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                  - color: |
                      [[[
                        var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                        return (status === 'Off' || status === 'unknown' || status === 'unavailable') ? 'transparent' : '#7fff00';
                      ]]]
                name:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
                  - color: |
                      [[[
                        var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                        return (status === 'Off' || status === 'unknown' || status === 'unavailable') ? 'transparent' : '#7fff00';
                      ]]]
            
            - type: custom:button-card
              entity: sensor.creality_pi_space_plus_v2_current_temperature
              show_icon: false
              show_name: false
              show_label: true
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - padding: 0
                  - font-family: monospace
                  - font-size: 16px
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - border: |
                      [[[
                        var errEnt = states['sensor.creality_pi_space_plus_v2_error_status'];
                        var error = errEnt ? errEnt.state : null;
                        return error === 'E4' ? '1px solid red' : 'none';
                      ]]]
                  - border-radius: |
                      [[[
                        var errEnt = states['sensor.creality_pi_space_plus_v2_error_status'];
                        var error = errEnt ? errEnt.state : null;
                        return error === 'E4' ? '12px' : '0';
                      ]]]
                label:
                  - padding: 0px 0px
                  - justify-self: start
                  - text-align: left
                  - color: |
                      [[[
                        var errEnt = states['sensor.creality_pi_space_plus_v2_error_status'];
                        var error = errEnt ? errEnt.state : null;
                        return error === 'E4' ? 'red' : '#7fff00';
                      ]]]
                  - animation: |
                      [[[
                        var errEnt = states['sensor.creality_pi_space_plus_v2_error_status'];
                        var error = errEnt ? errEnt.state : null;
                        return error === 'E4' ? 'blink 1s infinite' : 'none';
                      ]]]
              label: |
                [[[
                  var errEnt = states['sensor.creality_pi_space_plus_v2_error_status'];
                  var statEnt = states['sensor.creality_pi_space_plus_v2_dryer_status'];
                  var error = errEnt ? errEnt.state : null;
                  var status = statEnt ? statEnt.state : null;
                  
                  # Show nothing when device is off
                  if (status === 'Off' || status === 'unknown' || status === 'unavailable') return '';
                  # Show error with description
                  if (error === 'E4') return 'E4 - Heat Err';
                  
                  # Show temperature with degree symbol
                  return entity && entity.state && entity.state !== 'unknown'
                    ? entity.state + '¬∞C'
                    : '';
                ]]]
              extra_styles: |
                @keyframes blink {
                  0% { opacity: 1; }
                  50% { opacity: 0.2; }
                  100% { opacity: 1; }
                }
            
            - type: custom:button-card
              entity: sensor.creality_pi_space_plus_v2_humidity
              show_icon: false
              show_name: false
              show_label: true
              label: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  if (status === 'Off' || status === 'unknown' || status === 'unavailable') return '';
                  return entity.state + '%';
                ]]]
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                  - min-height: 23px  
                label:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
        
        - type: horizontal-stack
          cards:
            - type: custom:button-card
              entity: sensor.creality_pi_space_plus_v2_cursor_state
              show_icon: false
              show_name: false
              show_label: true
              label: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  if (status === 'Off' || status === 'unknown' || status === 'unavailable') return '';
                  return (entity.state === 'SV') ? '‚ñ∂' : ' ';
                ]]]
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - width: 20px
                  - height: 20px
                  - justify-content: flex-end
                  - align-items: flex-start
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                label:
                  - justify-self: end
                  - text-align: right
                  - padding: 0
            
            - type: custom:button-card
              name: "SV:"
              show_icon: false
              show_name: true
              show_label: false
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                name:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
                  - color: |
                      [[[
                        var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                        return (status === 'Off' || status === 'unknown' || status === 'unavailable') ? 'transparent' : '#7fff00';
                      ]]]
            
            - type: custom:button-card
              entity: sensor.creality_pi_space_plus_v2_set_temperature
              show_icon: false
              show_name: false
              show_label: true
              label: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  if (status === 'Off' || status === 'unknown' || status === 'unavailable') return '';
                  return entity.state + '¬∞C';
                ]]]
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                label:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
            
            - type: custom:button-card
              entity: binary_sensor.creality_pi_space_plus_v2_script_running
              show_icon: false
              show_name: false
              show_label: true
              label: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  if (status === 'Off' || status === 'unknown' || status === 'unavailable') return '';
                  return entity.state === 'on' ? 'SCRIPT' : '';
                ]]]
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: |
                      [[[
                        var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                        if (status === 'Off' || status === 'unknown' || status === 'unavailable') return 'none';
                        return entity.state === 'on' ? '1px solid red' : 'none';
                      ]]]
                  - border-radius: 15px  
                  - padding: 2px 8px
                  - justify-content: center
                  - align-items: center
                  - text-align: center
                  - min-width: 60px
                  - min-height: 23px
                label:
                  - color: |
                      [[[
                        var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                        if (status === 'Off' || status === 'unknown' || status === 'unavailable') return 'transparent';
                        return entity.state === 'on' ? 'red' : 'transparent';
                      ]]]
                  - font-size: 11px
                  - font-weight: bold
                  - font-family: monospace
                  - height: 14px
                  - line-height: 14px
                  - animation: |
                      [[[
                        var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                        if (status === 'Off' || status === 'unknown' || status === 'unavailable') return 'none';
                        return entity.state === 'on' ? 'blink 1s infinite' : 'none';
                      ]]]
              extra_styles: |
                @keyframes blink {
                  0% { opacity: 1; }
                  50% { opacity: 0.3; }
                  100% { opacity: 1; }
                }
        
        - type: horizontal-stack
          cards:
            - type: custom:button-card
              entity: sensor.creality_pi_space_plus_v2_cursor_state
              show_icon: false
              show_name: false
              show_label: true
              label: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  if (status === 'Off' || status === 'unknown' || status === 'unavailable') return '';
                  return (entity.state === 'Material') ? '‚ñ∂' : ' ';
                ]]]
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - width: 20px
                  - height: 20px
                  - min-height: 23px
                  - justify-content: flex-end
                  - align-items: flex-start
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                label:
                  - justify-self: end
                  - text-align: right
                  - padding: 0
            
            - type: custom:button-card
              name: "Material:"
              show_icon: false
              show_name: true
              show_label: false
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                name:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
                  - color: |
                      [[[
                        var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                        return (status === 'Off' || status === 'unknown' || status === 'unavailable') ? 'transparent' : '#7fff00';
                      ]]]
            
            - type: custom:button-card
              entity: sensor.creality_pi_space_plus_v2_material
              show_icon: false
              show_name: false
              show_label: true
              label: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  if (status === 'Off' || status === 'unknown' || status === 'unavailable') return '';
                  return entity.state;
                ]]]
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                label:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
            
            - type: custom:button-card
              entity: switch.creality_pi_space_plus_v2_enable_auto_dry
              show_icon: false
              show_name: false
              show_label: true
              label: AUTO DRY  
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: |
                      [[[
                        var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                        if (status === 'unavailable' || status === 'unknown') return '1px solid #808080';
                        return entity.state === 'on' ? '1px solid orange' : '1px solid #808080';
                      ]]]
                  - border-radius: 15px  
                  - padding: 2px 8px
                  - justify-content: center
                  - align-items: center
                  - text-align: center
                  - min-width: 60px
                  - min-height: 23px
                label:
                  - color: |
                      [[[
                        var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                        if (status === 'unavailable' || status === 'unknown') return '#808080';
                        return entity.state === 'on' ? 'orange' : '#808080';
                      ]]]
                  - font-size: 11px
                  - font-weight: bold
                  - font-family: monospace
                  - height: 14px
                  - line-height: 14px
        
        - type: horizontal-stack
          cards:
            - type: custom:button-card
              entity: sensor.creality_pi_space_plus_v2_cursor_state
              show_icon: false
              show_name: false
              show_label: true
              label: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  if (status === 'Off' || status === 'unknown' || status === 'unavailable') return '';
                  return (entity.state === 'Time') ? '‚ñ∂' : ' ';
                ]]]
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - width: 20px
                  - height: 20px
                  - justify-content: flex-end
                  - align-items: flex-start
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                label:
                  - justify-self: end
                  - text-align: right
                  - padding: 0
            
            - type: custom:button-card
              name: "Time:"
              show_icon: false
              show_name: true
              show_label: false
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                name:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
                  - color: |
                      [[[
                        var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                        return (status === 'Off' || status === 'unknown' || status === 'unavailable') ? 'transparent' : '#7fff00';
                      ]]]
            
            - type: custom:button-card
              entity: sensor.creality_pi_space_plus_v2_drying_time
              show_icon: false
              show_name: false
              show_label: true
              label: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  if (status === 'Off' || status === 'unknown' || status === 'unavailable') return '';
                  return entity.state;
                ]]]
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - min-height: 23px
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                label:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
            
            - type: custom:button-card
              entity: switch.creality_pi_space_plus_v2_auto_power_on
              show_icon: false
              show_name: false
              show_label: true
              label: AUTO ON  
              styles:
                card:
                  - background: none
                  - box-shadow: none
                  - border: |
                      [[[
                        var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                        if (status === 'unavailable' || status === 'unknown') return '1px solid #808080';
                        return entity.state === 'on' ? '1px solid orange' : '1px solid #808080';
                      ]]]
                  - border-radius: 15px
                  - padding: 2px 8px
                  - justify-content: center
                  - align-items: center
                  - text-align: center
                  - min-width: 60px
                  - min-height: 23px
                label:
                  - color: |
                      [[[
                        var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                        if (status === 'unavailable' || status === 'unknown') return '#808080';
                        return entity.state === 'on' ? 'orange' : '#808080';
                      ]]]
                  - font-size: 11px
                  - font-weight: bold
                  - font-family: monospace
                  - height: 14px
                  - line-height: 14px
    style: |
      ha-card {
        background-color: #000000;  
        border: 2px solid #ffffff;  
        border-radius: 8px;         
        padding: 10px;              
      }
  
  - type: horizontal-stack
    cards:
      - type: custom:button-card
        name: SET
        icon: mdi:cog  
        tap_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.creality_pi_space_plus_v2_press_set
        styles:
          card:
            - height: 60px
            - background-color: "#000000"  
            - border: 2px solid
            - border-radius: 8px
          name:
            - color: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  return (status === 'Off' || status === 'unknown' || status === 'unavailable') ? 'transparent' : 'white';
                ]]]
            - font-size: 14px
          icon:
            - color: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  return (status === 'Off' || status === 'unknown' || status === 'unavailable') ? 'transparent' : '#7fff00';
                ]]]
      
      - type: custom:button-card
        name: UP
        icon: mdi:chevron-up  
        tap_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.creality_pi_space_plus_v2_press_up
        styles:
          card:
            - height: 60px
            - background-color: "#000000"
            - border: 2px solid
            - border-radius: 8px
          name:
            - color: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  return (status === 'Off' || status === 'unknown' || status === 'unavailable') ? 'transparent' : 'white';
                ]]]
            - font-size: 14px
          icon:
            - color: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  return (status === 'Off' || status === 'unknown' || status === 'unavailable') ? 'transparent' : '#7fff00';
                ]]]
      
      - type: custom:button-card
        name: DOWN
        icon: mdi:chevron-down  
        tap_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.creality_pi_space_plus_v2_press_down
        styles:
          card:
            - height: 60px
            - background-color: "#000000"
            - border: 2px solid
            - border-radius: 8px
          name:
            - color: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  return (status === 'Off' || status === 'unknown' || status === 'unavailable') ? 'transparent' : 'white';
                ]]]
            - font-size: 14px
          icon:
            - color: |
                [[[
                  var status = states['sensor.creality_pi_space_plus_v2_dryer_status'].state;
                  return (status === 'Off' || status === 'unknown' || status === 'unavailable') ? 'transparent' : '#7fff00';
                ]]]
      
      - type: custom:button-card
        name: POWER
        icon: mdi:power  
        tap_action:
          action: call-service
          service: button.press
          target:
            entity_id: button.creality_pi_space_plus_v2_press_power
        styles:
          card:
            - height: 60px
            - background-color: "#000000"
            - border: 2px solid
            - border-radius: 8px
          name:
            - color: white  
            - font-size: 14px
          icon:
            - color: red  
