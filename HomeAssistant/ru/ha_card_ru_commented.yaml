# ========================================
# КАРТА УПРАВЛЕНИЯ СУШИЛКОЙ
# ========================================
#
# Эта карта предназначена для управления сушилкой филамента (Creality Pi Space Plus)
# Для использования с другими устройствами замените все имена сенсоров на свои.
#
# ========================================
# СПИСОК ПЕРЕМЕННЫХ ДЛЯ ЗАМЕНЫ:
# ========================================
#
# 1. ОСНОВНЫЕ СЕНСОРЫ:
#    - sensor.creality_pi_space_plus_dryer_status          → Dryer status (On/Off)
#    - sensor.creality_pi_space_plus_cursor_state          → Current active menu (PV/SV/Material/Time)
#    - sensor.creality_pi_space_plus_current_temperature   → Current temperature
#    - sensor.creality_pi_space_plus_set_temperature       → Target temperature
#    - sensor.creality_pi_space_plus_humidity              → Humidity
#    - sensor.creality_pi_space_plus_error_status          → Error status (E1/E2/E3/E4)
#    - sensor.creality_pi_space_plus_material              → Material type
#    - sensor.creality_pi_space_plus_drying_time           → Drying time
#
# 2. ПЕРЕКЛЮЧАТЕЛИ:
#    - binary_sensor.creality_pi_space_plus_script_running → Script execution indicator
#    - switch.creality_pi_space_plus_enable_auto_dry       → Enable auto-dry
#    - switch.creality_pi_space_plus_auto_power_on         → Auto power-on
#
# 3. КНОПКИ УПРАВЛЕНИЯ:
#    - button.creality_pi_space_plus_press_set             → SET button
#    - button.creality_pi_space_plus_press_up              → UP button
#    - button.creality_pi_space_plus_press_down            → DOWN button
#    - button.creality_pi_space_plus_press_power           → POWER button
#    - button.creality_pi_space_plus_start_script          → Start full cycle
#    - button.creality_pi_space_plus_cancel_script_and_stop → Cancel and stop
#
# 4. СЕЛЕКТОРЫ И ЧИСЛА:
#    - select.creality_pi_space_plus_select_material       → Material selection dropdown
#    - number.creality_pi_space_plus_set_drying_time       → Set drying time (slider)
#
# ========================================
# КАК АДАПТИРОВАТЬ ДЛЯ ВАШЕГО УСТРОЙСТВА:
# ========================================
#
# 1. Используйте поиск и замену (Ctrl+H) в вашем редакторе
# 2. Замените "creality_pi_space_plus" на префикс вашего устройства
# 3. Убедитесь, что все сенсоры существуют в вашей системе
# 4. Удалите сенсоры, которые не существуют (например, error_status или script_running)
# 5. Измените цвета и размеры под ваш дизайн (цвет #7fff00 - лаймовый зеленый)
#
# ========================================
# НЕОБХОДИМЫЕ ПОЛЬЗОВАТЕЛЬСКИЕ КОМПОНЕНТЫ:
# ========================================
#
# Установите через HACS:
# - custom:button-card       → Main card for buttons
# - custom:mod-card          → For card styling
# - custom:mini-graph-card   → Temperature and humidity graph
#
# ========================================


type: vertical-stack
# Тип карты: вертикальный стек (элементы расположены сверху вниз)
cards:
# Начало списка карт внутри стека

  # Основной блок с информацией и элементами управления
  - type: custom:mod-card
    style: |
      ha-card {
        background-color: #000000;
        border: 2px solid #ffffff;
        border-radius: 8px;
        padding: 10px;
      }
    card:
      type: grid
      columns: 1
      square: false
      cards:

        # Горизонтальный ряд для отображения PV (текущая температура) с индикатором курсора
        - type: horizontal-stack
          cards:
            - type: custom:button-card
              entity: sensor.creality_pi_space_plus_cursor_state
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: false
              # Показать/скрыть метку имени
              show_label: true
              # Показать/скрыть дополнительную метку
              label: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  if (!status || ['Off', 'unknown', 'unavailable'].includes(status)) return '';
                  return (entity.state === 'PV') ? '▶' : ' ';
                ]]]
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - width: 20px
                  - height: 20px
                  - justify-content: flex-end
                  - align-items: flex-start
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                label:
                  - justify-self: end
                  - text-align: right
                  - padding: 0
            - type: custom:button-card
              name: "PV:"
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: true
              # Показать/скрыть метку имени
              show_label: false
              # Показать/скрыть дополнительную метку
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                name:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
                  - color: |
                      [[[
                        const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                        return !status || ['Off', 'unknown', 'unavailable'].includes(status) ? 'transparent' : '#7fff00';
                      ]]]
            - type: custom:button-card

              # Отображение текущей температуры с обработкой ошибок (E1, E2, E3, E4)
              entity: sensor.creality_pi_space_plus_current_temperature
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
                - sensor.creality_pi_space_plus_error_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: false
              # Показать/скрыть метку имени
              show_label: true
              # Показать/скрыть дополнительную метку
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - padding: 0
                  - font-family: monospace
                  - font-size: 16px
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - border: |
                      [[[
                        const errEnt = states['sensor.creality_pi_space_plus_error_status'];
                        const error = errEnt ? errEnt.state : null;
                        return (error && ['E1', 'E2', 'E3', 'E4'].includes(error)) ? '1px solid red' : 'none';
                      ]]]
                  - border-radius: |
                      [[[
                        const errEnt = states['sensor.creality_pi_space_plus_error_status'];
                        const error = errEnt ? errEnt.state : null;
                        return (error && ['E1', 'E2', 'E3', 'E4'].includes(error)) ? '12px' : '0';
                      ]]]
                label:
                  - padding: 0px 0px
                  - justify-self: start
                  - text-align: left
                  - color: |
                      [[[
                        const errEnt = states['sensor.creality_pi_space_plus_error_status'];
                        const error = errEnt ? errEnt.state : null;
                        return (error && ['E1', 'E2', 'E3', 'E4'].includes(error)) ? 'red' : '#7fff00';
                      ]]]
                  - animation: |
                      [[[
                        const errEnt = states['sensor.creality_pi_space_plus_error_status'];
                        const error = errEnt ? errEnt.state : null;
                        return (error && ['E1', 'E2', 'E3', 'E4'].includes(error)) ? 'blink 1s infinite' : 'none';
                      ]]]
              label: |
                [[[
                  const errEnt = states['sensor.creality_pi_space_plus_error_status'];
                  const statEnt = states['sensor.creality_pi_space_plus_dryer_status'];
                  const error = errEnt ? errEnt.state : null;
                  const status = statEnt ? statEnt.state : null;

                  if (!status || ['Off', 'unknown', 'unavailable'].includes(status)) return '';
                  
                  if (error === 'E1') return 'E1 — Over heat';
                  if (error === 'E2') return 'E2 — Short';
                  if (error === 'E3') return 'E3 — SW Err';
                  if (error === 'E4') return 'E4 — Heat Err';

                  return entity && entity.state && entity.state !== 'unknown'
                    ? entity.state + '°C'
                    : '';
                ]]]
              extra_styles: |
                @keyframes blink {
                  0% { opacity: 1; }
                  50% { opacity: 0.2; }
                  100% { opacity: 1; }
                }
            - type: custom:button-card

              # Отображение процента влажности
              entity: sensor.creality_pi_space_plus_humidity
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: false
              # Показать/скрыть метку имени
              show_label: true
              # Показать/скрыть дополнительную метку
              label: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  if (!status || ['Off', 'unknown', 'unavailable'].includes(status)) return '';
                  return entity.state + '%';
                ]]]
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                  - min-height: 23px
                label:
                  - justify-self: start
                  - text-align: left
                  - padding: 0

        # Горизонтальный ряд для отображения PV (текущая температура) с индикатором курсора
        - type: horizontal-stack
          cards:
            - type: custom:button-card
              entity: sensor.creality_pi_space_plus_cursor_state
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: false
              # Показать/скрыть метку имени
              show_label: true
              # Показать/скрыть дополнительную метку
              label: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  if (!status || ['Off', 'unknown', 'unavailable'].includes(status)) return '';
                  return (entity.state === 'SV') ? '▶' : ' ';
                ]]]
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - width: 20px
                  - height: 20px
                  - justify-content: flex-end
                  - align-items: flex-start
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                label:
                  - justify-self: end
                  - text-align: right
                  - padding: 0
            - type: custom:button-card
              name: "SV:"
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: true
              # Показать/скрыть метку имени
              show_label: false
              # Показать/скрыть дополнительную метку
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                name:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
                  - color: |
                      [[[
                        const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                        return !status || ['Off', 'unknown', 'unavailable'].includes(status) ? 'transparent' : '#7fff00';
                      ]]]
            - type: custom:button-card

              # Отображение заданной (целевой) температуры
              entity: sensor.creality_pi_space_plus_set_temperature
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: false
              # Показать/скрыть метку имени
              show_label: true
              # Показать/скрыть дополнительную метку
              label: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  if (!status || ['Off', 'unknown', 'unavailable'].includes(status)) return '';
                  return entity.state + '°C';
                ]]]
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                label:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
            - type: custom:button-card

              # Индикатор выполнения скрипта автоматизации
              entity: binary_sensor.creality_pi_space_plus_script_running
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: false
              # Показать/скрыть метку имени
              show_label: true
              # Показать/скрыть дополнительную метку
              label: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  if (!status || ['Off', 'unknown', 'unavailable'].includes(status)) return '';
                  return entity.state === 'on' ? 'SCRIPT' : '';
                ]]]
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: |
                      [[[
                        const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                        if (!status || ['Off', 'unknown', 'unavailable'].includes(status)) return 'none';
                        return entity.state === 'on' ? '1px solid red' : 'none';
                      ]]]
                  - border-radius: 15px
                  - padding: 2px 8px
                  - justify-content: center
                  - align-items: center
                  - text-align: center
                  - min-width: 60px
                  - min-height: 23px
                label:
                  - color: |
                      [[[
                        const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                        if (!status || ['Off', 'unknown', 'unavailable'].includes(status)) return 'transparent';
                        return entity.state === 'on' ? 'red' : 'transparent';
                      ]]]
                  - font-size: 11px
                  - font-weight: bold
                  - font-family: monospace
                  - height: 14px
                  - line-height: 14px
                  - animation: |
                      [[[
                        const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                        if (!status || ['Off', 'unknown', 'unavailable'].includes(status)) return 'none';
                        return entity.state === 'on' ? 'blink 1s infinite' : 'none';
                      ]]]
              extra_styles: |
                @keyframes blink {
                  0% { opacity: 1; }
                  50% { opacity: 0.3; }
                  100% { opacity: 1; }
                }

        # Горизонтальный ряд для отображения PV (текущая температура) с индикатором курсора
        - type: horizontal-stack
          cards:
            - type: custom:button-card
              entity: sensor.creality_pi_space_plus_cursor_state
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: false
              # Показать/скрыть метку имени
              show_label: true
              # Показать/скрыть дополнительную метку
              label: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  if (!status || ['Off', 'unknown', 'unavailable'].includes(status)) return '';
                  return (entity.state === 'Material') ? '▶' : ' ';
                ]]]
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - width: 20px
                  - height: 20px
                  - min-height: 23px
                  - justify-content: flex-end
                  - align-items: flex-start
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                label:
                  - justify-self: end
                  - text-align: right
                  - padding: 0
            - type: custom:button-card
              name: "Material:"
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: true
              # Показать/скрыть метку имени
              show_label: false
              # Показать/скрыть дополнительную метку
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                name:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
                  - color: |
                      [[[
                        const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                        return !status || ['Off', 'unknown', 'unavailable'].includes(status) ? 'transparent' : '#7fff00';
                      ]]]
            - type: custom:button-card

              # Отображение текущего типа материала
              entity: sensor.creality_pi_space_plus_material
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: false
              # Показать/скрыть метку имени
              show_label: true
              # Показать/скрыть дополнительную метку
              label: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  if (!status || ['Off', 'unknown', 'unavailable'].includes(status)) return '';
                  return entity.state;
                ]]]
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                label:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
            - type: custom:button-card

              # Переключатель режима автоматической сушки
              entity: switch.creality_pi_space_plus_enable_auto_dry
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: false
              # Показать/скрыть метку имени
              show_label: true
              # Показать/скрыть дополнительную метку
              label: AUTO DRY
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: |
                      [[[
                        const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                        if (!status || ['unavailable', 'unknown'].includes(status)) return '1px solid #808080';
                        return entity.state === 'on' ? '1px solid orange' : '1px solid #808080';
                      ]]]
                  - border-radius: 15px
                  - padding: 2px 8px
                  - justify-content: center
                  - align-items: center
                  - text-align: center
                  - min-width: 80px
                  - min-height: 23px
                label:
                  - color: |
                      [[[
                        const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                        if (!status || ['unavailable', 'unknown'].includes(status)) return '#808080';
                        return entity.state === 'on' ? 'orange' : '#808080';
                      ]]]
                  - font-size: 10px
                  - font-weight: bold
                  - font-family: monospace
                  - height: 14px
                  - line-height: 14px

        # Горизонтальный ряд для отображения PV (текущая температура) с индикатором курсора
        - type: horizontal-stack
          cards:
            - type: custom:button-card
              entity: sensor.creality_pi_space_plus_cursor_state
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: false
              # Показать/скрыть метку имени
              show_label: true
              # Показать/скрыть дополнительную метку
              label: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  if (!status || ['Off', 'unknown', 'unavailable'].includes(status)) return '';
                  return (entity.state === 'Time') ? '▶' : ' ';
                ]]]
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - width: 20px
                  - height: 20px
                  - justify-content: flex-end
                  - align-items: flex-start
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                label:
                  - justify-self: end
                  - text-align: right
                  - padding: 0
            - type: custom:button-card
              name: "Time:"
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: true
              # Показать/скрыть метку имени
              show_label: false
              # Показать/скрыть дополнительную метку
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                name:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
                  - color: |
                      [[[
                        const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                        return !status || ['Off', 'unknown', 'unavailable'].includes(status) ? 'transparent' : '#7fff00';
                      ]]]
            - type: custom:button-card

              # Отображение оставшегося времени сушки
              entity: sensor.creality_pi_space_plus_drying_time
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: false
              # Показать/скрыть метку имени
              show_label: true
              # Показать/скрыть дополнительную метку
              label: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  if (!status || ['Off', 'unknown', 'unavailable'].includes(status)) return '';
                  return entity.state;
                ]]]
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: none
                  - padding: 0
                  - min-height: 23px
                  - justify-content: flex-start
                  - align-items: flex-start
                  - text-align: left
                  - font-family: monospace
                  - font-size: 16px
                  - color: "#7fff00"
                label:
                  - justify-self: start
                  - text-align: left
                  - padding: 0
            - type: custom:button-card

              # Переключатель функции автоматического включения
              entity: switch.creality_pi_space_plus_auto_power_on
              triggers_update:
              # Сущности, которые запускают обновление этого элемента
                - sensor.creality_pi_space_plus_dryer_status
              show_icon: false
              # Показать/скрыть иконку
              show_name: false
              # Показать/скрыть метку имени
              show_label: true
              # Показать/скрыть дополнительную метку
              label: AUTO ON
              styles:
              # Настройки стиля для этого элемента

                card:
                  - background: none
                  - box-shadow: none
                  - border: |
                      [[[
                        const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                        if (!status || ['unavailable', 'unknown'].includes(status)) return '1px solid #808080';
                        return entity.state === 'on' ? '1px solid orange' : '1px solid #808080';
                      ]]]
                  - border-radius: 15px
                  - padding: 2px 8px
                  - justify-content: center
                  - align-items: center
                  - text-align: center
                  - min-width: 70px
                  - min-height: 23px
                label:
                  - color: |
                      [[[
                        const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                        if (!status || ['unavailable', 'unknown'].includes(status)) return '#808080';
                        return entity.state === 'on' ? 'orange' : '#808080';
                      ]]]
                  - font-size: 10px
                  - font-weight: bold
                  - font-family: monospace
                  - height: 14px
                  - line-height: 14px

        # Основной блок с информацией и элементами управления
        - type: custom:mod-card
          card_mod:
            style: |
            
              ha-card {
                background-color: transparent ;
                box-shadow: none ;
                border: none ;
                padding: 0 ;
              }
              hui-horizontal-stack-card {
                height: auto ;
              }
              hui-horizontal-stack-card $: |
                #root > * {
                  margin: 0 ;
                }
                #root > :first-child {
                  width: 35% ;
                  flex: 0 0 35% ;
                }
                #root > :last-child {
                  width: 65% ;
                  flex: 0 0 65% ;
                }

          card:
            type: horizontal-stack
            cards:
              - type: entities
                card_mod:
                  style: |
                    ha-card {
                      background-color: transparent ;
                      box-shadow: none ;
                      border: none ;
                      padding: 0 ;
                      height: 40px ;
                    }
                    .card-content {
                      padding: 0 ;
                    }
                    hui-select-entity-row {
                      --paper-item-icon-color: #2196F3 ;
                      --primary-text-color: #2196F3 ;
                      --secondary-text-color: #2196F3 ;
                      --primary-color: #2196F3 ;
                      --mdc-select-ink-color:  ;
                      --mdc-select-fill-color: #000000 ;
                      --mdc-select-dropdown-icon-color: #2196F3 ;
                      --mdc-select-label-ink-color: #2196F3 ;
                      font-family: monospace ;
                      font-size: 14px ;
                    }
                    hui-select-entity-row $ hui-generic-entity-row $ {
                      .info {
                        display: none ;
                      }
                    }
                    state-badge {
                      margin-left: 0 ;
                    }
                entities:

                  # Выпадающий список для выбора типа материала
                  - entity: select.creality_pi_space_plus_select_material
                    name: Material
              - type: entities
                card_mod:
                  style: |
                    ha-card {
                      background: transparent ;
                      box-shadow: none ;
                      border: none ;
                      padding: 0 ;
                      height: 55px ;
                    }
                    .card-content {
                      padding: 0 ;
                    }
                entities:
                  - type: custom:service-call
                    entries:
                      - type: slider

                        # Слайдер для установки времени сушки (0-48 часов)
                        entity_id: number.creality_pi_space_plus_set_drying_time
                        icon: ""
                        label: ""
                        tap_action:
                        # Действие при нажатии кнопки
                          action: perform-action
                          perform_action: number.set_value
                          data:
                            value: "{{ value | int }}"
                          target:

                            # Слайдер для установки времени сушки (0-48 часов)
                            entity_id: number.creality_pi_space_plus_set_drying_time
                        range:
                          - 0
                          - 48
                        step: 1
                        thumb: round
                        unit_of_measurement: ч
                        styles: |
                          :host {
                            --color: #2196F3;
                            flex-basis: 100%;
                            height: 35px;
                            margin-top: 15px;
                          }
                          .icon-label {
                            display: none ;
                          }
                          .container {
                            padding: 0 12px;
                          }
                          .tooltip {
                            --tooltip-label: '{{ value | int }} ч';
                            --tooltip-display: flex ;
                            --tooltip-transform: translate(var(--thumb-offset), 7px);
                            background: transparent;
                            color: #;
                            padding: 0;
                            border-radius: 0;
                            font-family: monospace;
                            font-size: 15px;
                            font-weight: regular;
                            opacity: 1;
                            pointer-events: none;
                          }
  - type: horizontal-stack
    cards:
      - type: custom:button-card

        # Секция кнопок управления
        # Кнопка SET - навигация по опциям меню
        name: SET
        icon: mdi:cog
        triggers_update:
        # Сущности, которые запускают обновление этого элемента
          - sensor.creality_pi_space_plus_dryer_status
        tap_action:
        # Действие при нажатии кнопки
          action: call-service
          service: button.press
          target:
            entity_id: button.creality_pi_space_plus_press_set
        styles:
        # Настройки стиля для этого элемента

          card:
            - height: 60px
            - background-color: "#000000"
            - border: 2px solid
            # Белая сплошная граница толщиной 2px
            - border-radius: 8px
            # Закругленные углы (8 пикселей)
          name:
            - color: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  return !status || ['Off', 'unknown', 'unavailable'].includes(status) ? 'transparent' : 'white';
                ]]]
            - font-size: 14px
          icon:
            - color: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  return !status || ['Off', 'unknown', 'unavailable'].includes(status) ? 'transparent' : '#7fff00';
                ]]]
      - type: custom:button-card

        # Кнопка UP - увеличение значений
        name: UP
        icon: mdi:chevron-up
        triggers_update:
        # Сущности, которые запускают обновление этого элемента
          - sensor.creality_pi_space_plus_dryer_status
        tap_action:
        # Действие при нажатии кнопки
          action: call-service
          service: button.press
          target:
            entity_id: button.creality_pi_space_plus_press_up
        styles:
        # Настройки стиля для этого элемента

          card:
            - height: 60px
            - background-color: "#000000"
            - border: 2px solid
            # Белая сплошная граница толщиной 2px
            - border-radius: 8px
            # Закругленные углы (8 пикселей)
          name:
            - color: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  return !status || ['Off', 'unknown', 'unavailable'].includes(status) ? 'transparent' : 'white';
                ]]]
            - font-size: 14px
          icon:
            - color: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  return !status || ['Off', 'unknown', 'unavailable'].includes(status) ? 'transparent' : '#7fff00';
                ]]]
      - type: custom:button-card

        # Кнопка DOWN - уменьшение значений
        name: DOWN
        icon: mdi:chevron-down
        triggers_update:
        # Сущности, которые запускают обновление этого элемента
          - sensor.creality_pi_space_plus_dryer_status
        tap_action:
        # Действие при нажатии кнопки
          action: call-service
          service: button.press
          target:
            entity_id: button.creality_pi_space_plus_press_down
        styles:
        # Настройки стиля для этого элемента

          card:
            - height: 60px
            - background-color: "#000000"
            - border: 2px solid
            # Белая сплошная граница толщиной 2px
            - border-radius: 8px
            # Закругленные углы (8 пикселей)
          name:
            - color: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  return !status || ['Off', 'unknown', 'unavailable'].includes(status) ? 'transparent' : 'white';
                ]]]
            - font-size: 14px
          icon:
            - color: |
                [[[
                  const status = states['sensor.creality_pi_space_plus_dryer_status'].state;
                  return !status || ['Off', 'unknown', 'unavailable'].includes(status) ? 'transparent' : '#7fff00';
                ]]]
      - type: custom:button-card

        # Кнопка START - запуск автоматического цикла сушки
        name: START
        icon: mdi:play
        tap_action:
        # Действие при нажатии кнопки
          action: call-service
          service: button.press
          target:
            entity_id: button.creality_pi_space_plus_start_script
        styles:
        # Настройки стиля для этого элемента

          card:
            - height: 60px
            - background-color: "#000000"
            - border: 2px solid
            # Белая сплошная граница толщиной 2px
            - border-radius: 8px
            # Закругленные углы (8 пикселей)
          name:
            - color: white
            - font-size: 14px
          icon:
            - color: "#7fff00"
      - type: custom:button-card

        # Кнопка STOP - отмена скрипта и остановка сушки
        name: STOP
        icon: mdi:stop
        tap_action:
        # Действие при нажатии кнопки
          action: call-service
          service: button.press
          target:
            entity_id: button.creality_pi_space_plus_cancel_script_and_stop
        styles:
        # Настройки стиля для этого элемента

          card:
            - height: 60px
            - background-color: "#000000"
            - border: 2px solid
            # Белая сплошная граница толщиной 2px
            - border-radius: 8px
            # Закругленные углы (8 пикселей)
          name:
            - color: white
            - font-size: 14px
          icon:
            - color: red
      - type: custom:button-card

        # Кнопка POWER - включение/выключение устройства
        name: POWER
        icon: mdi:power
        tap_action:
        # Действие при нажатии кнопки
          action: call-service
          service: button.press
          target:
            entity_id: button.creality_pi_space_plus_press_power
        styles:
        # Настройки стиля для этого элемента

          card:
            - height: 60px
            - background-color: "#000000"
            - border: 2px solid
            # Белая сплошная граница толщиной 2px
            - border-radius: 8px
            # Закругленные углы (8 пикселей)
          name:
            - color: white
            - font-size: 14px
          icon:
            - color: red

  # График температуры и влажности
  - type: custom:mini-graph-card
    entities:
      - entity: sensor.creality_pi_space_plus_current_temperature
        name: Temperature
        color: red
      - entity: sensor.creality_pi_space_plus_set_temperature
        name: Set
        color: orange
      - entity: sensor.creality_pi_space_plus_humidity
        name: Humidity
        color: "#2196F3"
        y_axis: secondary
    hours_to_show: 3
    # Количество часов для отображения на графике
    points_per_hour: 6
    # Точки данных в час (влияет на детализацию графика)
    line_width: 2
    # Ширина линий графика в пикселях
    hour24: true
    font_size: 100
    animate: true
    show:
      name: false
      icon: false
      legend: true
      state: false
      fill: fade
    style: |
      ha-card {
        background-color: #000000 ;
        border: 2px solid #ffffff ;
        border-radius: 8px ;
        padding: 10px ;
        margin-top: 10px;
        font-family: monospace ;
      }
      .header {
        color: #ffffff ;
        font-family: monospace ;
      }
      .name {
        color: #ffffff ;
        font-family: monospace ;
      }
      .graph__legend__item {
        color: #ffffff ;
        font-family: monospace ;
      }
      .graph__container__svg {
        color: #ffffff ;
      }
      .graph__legend {
        font-family: monospace ;
        color: #ffffff ;
      }
      .info {
        color: #ffffff ;
      }
    card_mod:
      style: |
        ha-card {
          --primary-text-color: #ffffff ;
          --secondary-text-color: #ffffff ;
          --ha-card-background: #000000 ;
        }
